2025-11-25 15:43:21 error: unhandledRejection: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:258:25) Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:258:25)
2025-11-25 15:58:43 error: unhandledRejection: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:265:25) Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:265:25)
2025-11-25 16:13:58 error: unhandledRejection: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:272:21) Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:272:21)
2025-11-25 16:26:21 error: unhandledRejection: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:263:25) Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:263:25)
2025-11-25 16:27:25 error: unhandledRejection: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:263:25) Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:794:10)
    at ServerResponse.send (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:174:12)
    at ServerResponse.json (D:\Citylink-Inventory\backend\node_modules\express\lib\response.js:278:15)
    at upsertProductVariant (D:\Citylink-Inventory\backend\src\controllers\productVariantController.ts:263:25)
2026-01-10 11:15:43 error: unhandledRejection: Unexpected non-whitespace character after JSON at position 4 (line 1 column 5)
SyntaxError: Unexpected non-whitespace character after JSON at position 4 (line 1 column 5)
    at JSON.parse (<anonymous>)
    at upsertPurchase (D:\Citylink-Inventory\backend\src\controllers\purchaseController.ts:237:45)
    at Layer.handle [as handle_request] (D:\Citylink-Inventory\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Citylink-Inventory\backend\node_modules\express\lib\router\route.js:149:13)
    at <anonymous> (D:\Citylink-Inventory\backend\src\controllers\purchaseController.ts:213:9)
    at done (D:\Citylink-Inventory\backend\node_modules\multer\lib\make-middleware.js:45:7)
    at indicateDone (D:\Citylink-Inventory\backend\node_modules\multer\lib\make-middleware.js:49:68)
    at D:\Citylink-Inventory\backend\node_modules\multer\lib\make-middleware.js:155:11
    at WriteStream.<anonymous> (D:\Citylink-Inventory\backend\node_modules\multer\storage\disk.js:43:9)
    at WriteStream.emit (node:events:519:35) SyntaxError: Unexpected non-whitespace character after JSON at position 4 (line 1 column 5)
    at JSON.parse (<anonymous>)
    at upsertPurchase (D:\Citylink-Inventory\backend\src\controllers\purchaseController.ts:237:45)
    at Layer.handle [as handle_request] (D:\Citylink-Inventory\backend\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Citylink-Inventory\backend\node_modules\express\lib\router\route.js:149:13)
    at <anonymous> (D:\Citylink-Inventory\backend\src\controllers\purchaseController.ts:213:9)
    at done (D:\Citylink-Inventory\backend\node_modules\multer\lib\make-middleware.js:45:7)
    at indicateDone (D:\Citylink-Inventory\backend\node_modules\multer\lib\make-middleware.js:49:68)
    at D:\Citylink-Inventory\backend\node_modules\multer\lib\make-middleware.js:155:11
    at WriteStream.<anonymous> (D:\Citylink-Inventory\backend\node_modules\multer\storage\disk.js:43:9)
    at WriteStream.emit (node:events:519:35)
